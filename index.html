<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>魔法学校からの脱出 ～双子が残した奇跡～</title>

	<!-- 古風なセリフ体を読み込み（表示環境に依存します） -->
	<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Noto+Serif+JP:wght@300;400;700&display=swap" rel="stylesheet">

	<style>
	/* --- 魔法学校（古びた羊皮紙）風スタイル --- */

		:root{
			--bg-paper-1: #fbf5ea; /* 羊皮紙ベース */
			--bg-paper-2: #f3e8d0; /* グラデ用 */
			--ink: #2b2318;       /* 文字色（インク）*/
			--muted: #7b5f42;     /* 装飾色（茶系）*/
			--accent: #5b3a7a;    /* 魔法っぽいアクセント（紫）*/
			--panel: rgba(42,34,25,0.06);
		}

		html, body { height: 100%; }
		body {
			font-family: "Noto Serif JP", "Cormorant Garamond", Georgia, serif;
			padding: 1rem;
			margin: 0;
			background:
				radial-gradient(circle at 10% 20%, rgba(90,60,30,0.03), transparent 10%),
				radial-gradient(circle at 90% 80%, rgba(80,50,20,0.02), transparent 10%),
				linear-gradient(180deg, var(--bg-paper-1) 0%, var(--bg-paper-2) 60%);
			color: var(--ink);
			-webkit-font-smoothing:antialiased;
			-moz-osx-font-smoothing:grayscale;
			/* 薄い紙の質感（小さなノイズ） */
			background-image: 
				linear-gradient(180deg, rgba(0,0,0,0.01) 0.5px, transparent 0.5px),
				linear-gradient(90deg, rgba(0,0,0,0.01) 0.5px, transparent 0.5px),
				linear-gradient(180deg, var(--bg-paper-1) 0%, var(--bg-paper-2) 60%);
			background-size: 100% 100%, 100% 100%, 100% 100%;
  			background-repeat: no-repeat;
  			/* optional: スクロールしても背景を固定したいなら */
  			background-attachment: fixed;
		}

		h1 { 
			text-align: center;
			margin-bottom: -1.0rem;
			font-size: clamp(1.1rem, 6vw, 2.4rem);
			letter-spacing: 0.04em;
			font-family: "Cormorant Garamond", Georgia, serif;
			color: var(--accent);
			text-shadow: 0 1px 0 rgba(255,255,255,0.6);
		}
		h2 { 
			text-align: center;
			margin-bottom: 1rem;
			font-size: clamp(0.9rem, 5vw, 1.8rem);
			letter-spacing: 0.02em;
			color: var(--muted);
			font-weight: 600;
		}
		/* 英語サブタイトル（小さめ・1行） */
		.subtitleEN {
		  margin-top: 4px;
		  margin-bottom: 0;
		  font-size: clamp(0.72rem, 1.6vw, 0.92rem); /* 小さめでレスポンシブ */
		  color: rgba(43,34,24,0.72);
		  font-style: italic;
		  font-weight: 500;
		  text-align: center;
		  white-space: nowrap;       /* 折り返さない（1行で完結） */
		  overflow: hidden;         /* 万が一長すぎたときに溢れない */
		  text-overflow: ellipsis;  /* 幅を超えたら省略記号にする（必要なら） */
		}

		.explain {
			margin-top: 0.5rem;
			margin-bottom: -0.5rem;
			font-size: clamp(0.65rem,2vw,1rem);
			color: rgba(43,34,24,0.9);
			text-align: center;
			line-height: 1.4;
		}

		.container {
			min-height: 100vh;
			padding: 24px;
			max-width: 640px;
			margin: 0 auto;
		}

		/* details パネル（羊皮紙のメモ帳風）*/
		.details {
			background: linear-gradient(180deg, rgba(255,250,243,0.9), rgba(250,240,224,0.95));
			border: 1px solid rgba(90,70,50,0.12);
			border-radius: 10px;
			overflow: hidden;
			box-shadow: 0 6px 18px rgba(44,34,22,0.06), inset 0 1px 0 rgba(255,255,255,0.6);
			margin-top: 0.75rem;
			margin-bottom: 0.75rem;
			position: relative;
		}

		/* summary 見出し（古いラベル風） */
		.summary {
			display: block;
			cursor: pointer;
			font-weight: 700;
			padding: 16px 20px;
			background-color: transparent;
			color: var(--ink);
			position: relative;
			transition: background-color 0.24s;
			font-family: "Cormorant Garamond", Georgia, serif;
			font-size: 1rem;
  			padding-left: 2.4em; /* テキストサイズに対する距離を指定 */
			letter-spacing: 0.01em;
		}


		/* 右側の矢印マーク（見た目は星に近い） */
		.summary::after { 
			content: '✦';
			position: absolute;
			right: 18px;
			top: 50%;
			transform: translateY(-50%);
			transition: transform 0.28s, color 0.28s;
			color: var(--muted);
			font-size: 0.95rem;
			opacity: 0.95;
		}

		/* open 状態の summary 背景変化 */
		.details[open] .summary {
			background-color: rgba(91,58,122,0.04);
		}
		.details[open] .summary::after {
			transform: translateY(-50%) rotate(180deg);
			color: var(--accent);
		}

		/* answer（展開部分） */
		.answer {
			overflow: hidden;
			opacity: 0;
			transition: max-height 0.28s ease-in-out, opacity 0.28s ease-in-out;
			/* max-height を JS の高さ制御と併用する想定（JSは変更しないので safe） */
		}
		.details[open] .answer { opacity: 1; }

		.answerInner {
			padding: 16px 22px;
			background-color: rgba(20,18,16,0.02);
			color: #3b3026;
			line-height: 1.7;
			border-top: 1px dashed rgba(90,70,50,0.06);
			font-size: 0.98rem;
		}

		/* ネスト時の見た目は少しコンパクトに */
		.details .details {
			background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(250,245,235,0.95));
			border-radius: 8px;
			margin: 0.6rem 0 0 0.6rem;
			border: 1px solid rgba(90,70,50,0.06);
		}
		.details .details .summary {
			padding: 12px 16px;
			font-size: 0.95rem;
			font-weight: 600;
		}
		.details .details .answerInner {
			padding: 12px 16px;
			font-size: 0.95rem;
		}

		/* モバイル調整 */
		@media (max-width: 480px) {
			.summary, .answerInner { padding: 12px 16px; }
			.summary::before { left: 10px; height: 22px; }
			.summary::after { right: 14px; }
		}
	</style>
</head>

<body>
	<h1>魔法学校からの脱出</h1>
	<h2>～双子が残した奇跡～</h2>
	<h3 class="subtitleEN">Escape From the Magic School<br> — The Miracle Left by the Twins — </h3>
    <h2 class="explain">
        これは魔法学校からの脱出のヒントページです<br>
        チーム内全体でヒントを見ることを決めてから見てください
    </h2>
	<div class="container">

		<!-- 地下封印室への入り方 -->
		<details class="details">
			<summary class="summary">地下封印室への入り方</summary>
			<div class="answer">
				<div class="answerInner">
地下封印室へ行くための謎を解き、地下の階段へ行く

<details class="details">
  <summary class="summary">記号の合わせ方</summary>
  <div class="answer"><div class="answerInner">記号は同じものは全部重なるように、でも向きは考えなくてもいい</div></div>
</details>

<details class="details">
  <summary class="summary">読み方</summary>
  <div class="answer"><div class="answerInner">例では右に向けて読む方法、右上に向けて読むときも2マス飛ばしで</div></div>
</details>

				</div>
			</div>
		</details>

		<!-- 地下封印室の謎 -->
		<details class="details">
			<summary class="summary">地下封印室の謎</summary>
			<div class="answer">
				<div class="answerInner">
地下封印室にあった手がかりをもとに、魔法を使えるようになる

<details class="details">
  <summary class="summary">本のありか</summary>
  <div class="answer"><div class="answerInner">実際に地図の場所へ行って、何かないか見てみる</div></div>
</details>

<details class="details">
  <summary class="summary">本の謎</summary>
  <div class="answer"><div class="answerInner">
それぞれの本の謎のヒント

<details class="details">
  <summary class="summary">No.1のヒント</summary>
  <div class="answer"><div class="answerInner">矢印に重なるまで進んで、重なったらその向きに方向転換する</div></div>
</details>

<details class="details">
  <summary class="summary">No.2のヒント</summary>
  <div class="answer"><div class="answerInner">例えば4と7と23を選べれば、クローバーと太陽と合わせて1列にそろう
<details class="details">
  <summary class="summary">追加ヒント</summary>
  <div class="answer"><div class="answerInner">この記号、どこかで重ねたような...?</div></div>
</details>
</div></div>
</details>

<details class="details">
  <summary class="summary">No.3のヒント</summary>
  <div class="answer"><div class="answerInner">このバラバラになったものをきれいにそろえる方法は...</div></div>
</details>

<details class="details">
  <summary class="summary">No.4のヒント</summary>
  <div class="answer"><div class="answerInner">りんご　ごりら　らっぱ...
<details class="details">
  <summary class="summary">追加ヒント</summary>
  <div class="answer"><div class="answerInner">この世界では、ランタンの次はけんでもいい</div></div>
</details>
</div></div>
</details>

<details class="details">
  <summary class="summary">No.5のヒント</summary>
  <div class="answer"><div class="answerInner">エとウの記号の一つ目は同じ。この二つの共通点は...?
<details class="details">
  <summary class="summary">追加ヒント</summary>
  <div class="answer"><div class="answerInner">すべてのひらがなを二つの要素に分解するには...?</div></div>
</details>
</div></div>
</details>

  </div></div>
</details>

			<!-- シンボルの探し方 -->
			<details class="details">
				<summary class="summary">シンボルの探し方</summary>
				<div class="answer">
					<div class="answerInner">
実際に本がある場所を立体的に考えて、つなげてみると...?

<details class="details">
  <summary class="summary">1つ目のシンボル</summary>
  <div class="answer"><div class="answerInner">この地図は各階を分けて、上から見たもの
では、これを重ね合わせると...?</div></div>
</details>

<details class="details">
  <summary class="summary">2つ目のシンボル</summary>
  <div class="answer"><div class="answerInner">横から見たものとして、これをもう一度重ね合わせる<br>
一度横からの図として書き出してみたほうがいいかも...?</div></div>
</details>

<details class="details">
  <summary class="summary">魔法を使うか迷ったとき</summary>
  <div class="answer"><div class="answerInner">封印がうまくいけば、呪いは消えるからお守りはいらなくなるはず</div></div>
</details>

					</div>
				</div>
			</details>
</div></div>
</details>

		<!-- 封印した後（トップレベル） -->
		<details class="details">
			<summary class="summary">封印した後</summary>
			<div class="answer">
				<div class="answerInner">
学校は壊れたままだけど、確かに呪いは消えた
赤を消せば何か変わるかも...?

<details class="details">
  <summary class="summary">正しい世界とは</summary>
  <div class="answer"><div class="answerInner">正しい世界とはすべての赤い歪みが消えた世界のこと</div></div>
</details>

<details class="details">
  <summary class="summary">本の謎</summary>
  <div class="answer"><div class="answerInner">本の赤い部分が見えないものとして解きなおせばうまくいきそう

<details class="details">
  <summary class="summary">赤い部分がない本</summary>
  <div class="answer"><div class="answerInner">赤い色を失ってしまった本の本来の色を取り戻せないだろうか？

<details class="details">
  <summary class="summary">No.4の本</summary>
  <div class="answer"><div class="answerInner">この紙全体に書かれているのは、そもそも何？</div></div>
</details>



</div></div>
</details>

		<!-- 魔法が使えないとき -->
		<details class="details">
			<summary class="summary">魔法が使えないとき</summary>
			<div class="answer">
				<div class="answerInner">すべての赤い歪みが消えた、正しい世界でないと魔法は使えないようだ</div>
			</div>
		</details>

		<!-- 最後の魔法 -->
		<details class="details">
			<summary class="summary">最後の魔法</summary>
			<div class="answer">
				<div class="answerInner">
<details class="details">
  <summary class="summary">もう1つのおまもりのありか</summary>
  <div class="answer"><div class="answerInner">赤いおまもり、これを呪われていないものにするには...?</div></div>
</details>
				</div>
			</div>
		</details>

	</div>

	<script>
                    document.addEventListener("DOMContentLoaded", () => {
                      document.querySelectorAll(".details").forEach(el => {
                        const summary = el.querySelector(".summary");
                        const answer = el.querySelector(".answer");
                
                        summary.addEventListener("click", event => {
                          event.stopPropagation();
                          event.preventDefault();
                
                          const isOpen = el.hasAttribute("open");
                
                          if (isOpen) {
                            // 閉じる処理
                            const currentHeight = answer.scrollHeight;
                            answer.style.height = currentHeight + "px";
                            requestAnimationFrame(() => {
                              answer.style.transition = "height 0.3s ease, opacity 0.3s ease";
                              answer.style.height = "0px";
                              answer.style.opacity = "0";
                            });
                
                            answer.addEventListener("transitionend", () => {
                              // 親のopen属性を削除
                              el.removeAttribute("open");
                              // 子のdetailsも全て閉じる
                              el.querySelectorAll(".details[open]").forEach(child => {
                                child.removeAttribute("open");
                              });
                              // スタイルリセット
                              answer.style.removeProperty("height");
                              answer.style.removeProperty("transition");
                              answer.style.removeProperty("opacity");
                            }, { once: true });
                
                          } else {
                            // 開く処理
                            el.setAttribute("open", "true");
                            answer.style.height = "0px";
                            answer.style.opacity = "0";
                            requestAnimationFrame(() => {
                              const targetHeight = answer.scrollHeight;
                              answer.style.transition = "height 0.3s ease, opacity 0.3s ease";
                              answer.style.height = targetHeight + "px";
                              answer.style.opacity = "1";
                            });
                
                            answer.addEventListener("transitionend", () => {
                              // 高さをautoに戻して柔軟に
                              answer.style.removeProperty("height");
                              answer.style.removeProperty("transition");
                            }, { once: true });
                          }
                        });
                      });
                    });
                  </script>
			</div>
		</details>
	</div>
</body>

</html>
